<!doctype html>
<html lang=en>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta charset=utf-8>
    <link rel="icon" type="image/png" href="/ap.png">
    <title>An√°lise da actividade parlamentar</title>
    <style type="text/css">
      body, html
      {
          margin: 0; padding: 0; height: 100%; overflow: hidden;
      }

      #content
      {
          position:absolute; left: 0; right: 0; bottom: 0; top: 0px;
      }
      div[class^="embeddedAppMetaInfoBar"] {
          visibility=hidden !important;
      }

      .hidefooter {
          position: absolute;
          width: 100%;
          height: 35px;
          min-height: 17px;
          padding: 0px;
          background: rgb(242,240,246);
          right: 0px;
          bottom: 0px;
          z-index: 2;
          display: flex;
          justify-content:center;
          align-items: center;
      }
      iframe {
          width: 100%;
          height: 100%;
          border: none;
      }

    </style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QWV0FX8T15"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QWV0FX8T15');
    </script>
  </head>
  <body>
    <div id="content">
      <div class="hidefooter">
        <a href="https://www.gnu.org/licenses/gpl-3.0.html">
          <img
            style="
                   height: 16px !important;
                   margin-left: 3px;
                   vertical-align: text-bottom;
                   "
            src="gpl.png"></img>
        </a>
        <a
          href="https://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1"
          target="_blank"
          rel="license noopener noreferrer"
          style="display: inline-block"

          ><img
             style="
		    height: 16px !important;
		    margin-left: 3px;
		    vertical-align: text-bottom;
		    "
             src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" /><img
												style="
												       height: 16px !important;
												       margin-left: 3px;
												       vertical-align: text-bottom;
												       "
												src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" /><img
																						   style="
																							  height: 16px !important;
																							  margin-left: 3px;
																							  vertical-align: text-bottom;
																							  "
																						   src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"
																						   /></a>
      </div>
      <iframe id="streamlitFrame" frameborder="0"></iframe>

      <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get the full URL path after domain
            const fullPath = window.location.href.split(window.location.host)[1];
            
            // Construct the iframe src URL
            let iframeSrc = 'https://hemicycle-pt.streamlit.app/';
            
            // Modified URL construction logic
            if (window.location.hash) {
                const virtualPath = window.location.hash.substring(1);
                let pathPart = virtualPath;
                let hashPart = '';
                const hashIndex = virtualPath.indexOf('#');
                
                if (hashIndex !== -1) {
                    pathPart = virtualPath.substring(0, hashIndex);
                    hashPart = virtualPath.substring(hashIndex + 1);
                }

                if (pathPart) {
                    if (pathPart.includes('?')) {
                        pathPart += '&embed=true';
                    } else {
                        pathPart += '?embed=true';
                    }
                    iframeSrc += pathPart;
                } else {
                    iframeSrc += '?embed=true';
                }

                if (hashPart) {
                    iframeSrc += '#' + hashPart;
                }
            } else {
                iframeSrc += '?embed=true';
            }
            
            // Set the iframe src
            document.getElementById('streamlitFrame').src = iframeSrc;
            
            // Handle hash changes
            window.addEventListener('hashchange', updateIframeSrc);
        });

        function updateIframeSrc() {
            let iframeSrc = 'https://hemicycle-pt.streamlit.app/';
            
            // Modified URL construction logic
            if (window.location.hash) {
                const virtualPath = window.location.hash.substring(1);
                let pathPart = virtualPath;
                let hashPart = '';
                const hashIndex = virtualPath.indexOf('#');
                
                if (hashIndex !== -1) {
                    pathPart = virtualPath.substring(0, hashIndex);
                    hashPart = virtualPath.substring(hashIndex + 1);
                }

                if (pathPart) {
                    if (pathPart.includes('?')) {
                        pathPart += '&embed=true';
                    } else {
                        pathPart += '?embed=true';
                    }
                    iframeSrc += pathPart;
                } else {
                    iframeSrc += '?embed=true';
                }

                if (hashPart) {
                    iframeSrc += '#' + hashPart;
                }
            } else {
                iframeSrc += '?embed=true';
            }

            document.getElementById('streamlitFrame').src = iframeSrc;
        }
      </script>
    </div>
  </body>
</html>
